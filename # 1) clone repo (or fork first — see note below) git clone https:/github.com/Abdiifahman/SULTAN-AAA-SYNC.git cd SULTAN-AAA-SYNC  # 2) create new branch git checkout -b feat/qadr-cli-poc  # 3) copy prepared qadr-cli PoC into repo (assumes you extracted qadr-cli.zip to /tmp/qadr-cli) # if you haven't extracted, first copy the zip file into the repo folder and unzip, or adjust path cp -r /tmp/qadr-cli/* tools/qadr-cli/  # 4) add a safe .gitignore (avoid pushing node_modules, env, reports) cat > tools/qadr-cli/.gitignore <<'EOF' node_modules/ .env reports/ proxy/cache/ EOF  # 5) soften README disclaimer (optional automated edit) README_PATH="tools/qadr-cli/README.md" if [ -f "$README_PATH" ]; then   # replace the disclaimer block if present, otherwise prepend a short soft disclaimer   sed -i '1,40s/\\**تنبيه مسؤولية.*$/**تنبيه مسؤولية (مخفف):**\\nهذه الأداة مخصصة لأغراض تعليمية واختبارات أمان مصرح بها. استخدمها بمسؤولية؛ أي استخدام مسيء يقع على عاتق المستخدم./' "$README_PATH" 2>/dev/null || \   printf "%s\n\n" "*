# 1) clone repo (or fork first — see note below)
git clone https://github.com/Abdiifahman/SULTAN-AAA-SYNC.git
cd SULTAN-AAA-SYNC

# 2) create new branch
git checkout -b feat/qadr-cli-poc

# 3) copy prepared qadr-cli PoC into repo (assumes you extracted qadr-cli.zip to /tmp/qadr-cli)
# if you haven't extracted, first copy the zip file into the repo folder and unzip, or adjust path
cp -r /tmp/qadr-cli/* tools/qadr-cli/

# 4) add a safe .gitignore (avoid pushing node_modules, env, reports)
cat > tools/qadr-cli/.gitignore <<'EOF'
node_modules/
.env
reports/
proxy/cache/
EOF

# 5) soften README disclaimer (optional automated edit)
README_PATH="tools/qadr-cli/README.md"
if [ -f "$README_PATH" ]; then
  # replace the disclaimer block if present, otherwise prepend a short soft disclaimer
  sed -i '1,40s/\\**
  printf "%s\n\n" "**تنبيه مسؤولية  هذه الأداة مخصصة لأغراض تعليمية واختبارات أمان مصرح بها. استخدمها بمسؤولية؛ أي استخدام مسيء يقع على عاتق المستخدم." | cat - "$README_PATH" > /tmp/rd && mv /tmp/rd "$README_PATH"
else
  cat > "$README_PATH" <<'EOF'
# QADR-CLI PoC
**تنبيه مسؤولية (مخفف):** هذه الأداة مخصصة لأغراض تعليمية واختبارات أمان مصرح بها. استخدمها بمسؤولية؛ أي استخدام مسيء يقع على عاتق المستخدم.
EOF
fi

# 6) add, commit, push
git add tools/qadr-cli
git commit -m "Add QADR-CLI PoC — code analysis, image-proxy, reporting (initial import)"
git push -u origin feat/qadr-cli-poc

# 7) create PR via GitHub CLI (ensure gh is authenticated)
gh pr create --title "Add QADR-CLI PoC (code analysis + proxy + reporting)" \
  --body "Initial import of the QADR-CLI PoC (cli/, proxy/, web/, examples/). Soft disclaimer in README: tool intended for legal/educational use; misuse is user's responsibility." \
  --base main